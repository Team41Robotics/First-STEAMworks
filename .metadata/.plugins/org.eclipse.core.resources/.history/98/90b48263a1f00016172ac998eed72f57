#ifndef SRC_IMU_H_
#define SRC_IMU_H_
#include "WPILib.h"
#include "WPILib_auxiliary.h"


#define RAD 3.14159 / 180.0

#define K_a0 0.5
#define K_a1 0.5

#define tau 0.45


class IMU
{
private:
	Timer *timer;

double i = 0.0;
	double curr_t =0.0;
	double old_t =0.0;


	double complementaryIMU(double accel_magnitude, double gyroAngle, int loop);
	void positionFilter(double ax, double ay, double ex, double ey);
	double kalmanIMU(double accelAngle, double gyroAngle);
	double modulo(double i, double j);
public:
	double theta;
	double accel_x = 0;
	double accel_y = 0;
	double velocity_x = 0;
	double velocity_y = 0;
	double position_x = 0;
	double position_y = 0;

	double test_positionX;
	double test_positionY;
	double position_r;

	IMU();
	void Localization(AHRS *nav);
	void get_delta_time();
	double del_t =0.0;
};

#endif /* SRC_IMU_H_ */
